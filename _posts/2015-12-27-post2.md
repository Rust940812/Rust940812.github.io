---
layout: blog
title: 会话控制
category: blog
tags: [human]  
summary: On the other end of the hallway rhythm was generating.
image: /images/blog/post2.jpg
---
数据库优化：
第一：从建表开始：
一.选择合理的字段类型
		比如用户状态可以选择tinyint，因为tinyint只占一个字节，而且其表示的范围较大：无符号的表示是0到256，而用枚举类型就不适合

二.尽量每个字段都添加NOT NULL(优化插入)

三.能够用数字类型的尽量使用数字类型（用int类型查询速度更快）
		比如IP地址我们可以使用数字类型，而不是用字符类型

四.选择合适的表引擎，比如：
	mysql版本是5.6以上的直接使用Innodb，而不是5.6之前的就分情况：如果表写操作比较频繁就用Innodb，因为Innodb支持行锁(支持同一个表插入数据)，查频繁就使用myisam(查询速度快)

五.选择合适的字符集，一般都是选择utf8

六.根据业务需求给经常作为where/order by /group by后面的字段添加索引
	索引能够加快查询速度

七.把不常用的字段和字段类型比较大的(text)划分到其他表中
	表字段过多就会使查询速度减慢，所以要减少表的字段：可以采用水平分表（就是分成user1,user2等多个表）,其二采用垂直分表（比如用户详情表和用户表）

八.适当字段冗余（反范式设计），以达到空间换时间
	比如：订单表上直接加上用户名字的字段，而不加用户id关联
	优点：
		效率高，不用联表查询

	缺点：
		占用额外空间（一般来说这个不是什么问题）
		维护困难，一旦某个冗余字段的内容有改动，所有涉及到的地方都需改动


第二：数据库配置文件上的优化
	数据库配置文件的参数也可以根据业务情况改动(DBA)

第三：架构层面的优化:
	1.分库分表分区
	2.搭建主从数据库，做到读写分离，减少单库服务器的压力


第四：查询上的优化：
	select id, name from user where md5(name) = '' limit 10

	1.不要使用*，尽量只查所需的字段
	2.尽量使用LIMIT,减少数据库传输大小（使用了limit也会导致全表扫描）
	3.尽量根据索引来检索数据
	4.尽量减少在数据库中进行运算，使用内置函数
	5.尽量不使用子查询，可以用连接替换，连接字段需要添加索引
	6.尽量使用like模糊查询（会导致全表扫描）

第五：索引的合理建立
	





	

